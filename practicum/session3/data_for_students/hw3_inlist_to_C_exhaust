! For the sake of future readers of this file (yourself included),
! ONLY include the controls you are actually using.  DO NOT include
! all of the other controls that simply have their default values.

&star_job

  ! display on-screen plots
    pgstar_flag = .true.

  ! specify the history columns to use
  history_columns_file = '/mnt/home/lvanson/ceph/MESAoutput/Teaching/ASBE2025/HW3_experiments/HW3_base/history_columns.list'

  ! stop before terminate so that you can see the plots 
    pause_before_terminate = .false.

/ !end of star_job namelist


&controls

  ! from cluster running     
    read_extra_controls_inlist1 = .true.
    extra_controls_inlist1_name = 'inlist_gridrun' ! should be in run dir

  ! Initial mass of the star
  !  initial_mass = 15.0 ! in Msun units (happens in inlist_gridrun)

  ! output directory for log files
  !  log_directory = 'LOGS/M15_HW3' (happens in inlist_gridrun)

  ! use C/O enhanced opacities
  ! important for He-burning onwards
    use_Type2_opacities = .true.
    Zbase = 0.02


  !   S T O P P I N G   C O N D I T I O N S

  ! stop when the center mass fraction of he4 drops below this limit
    xa_central_lower_limit_species(1) = 'c12'
    xa_central_lower_limit(1) = 5d-5


  !   T E C H N I C A L   S E T T I N G S  
  !  (mostly from test_suite inlist massive defaults)

  ! high center T limit to avoid negative mass fractions
    sig_min_factor_for_high_Tcenter = 0.01
    ! inactive when >= 1d0
      ! if Tcenter >= Tcenter_min_for_sig_min_factor_full_on,
      ! then okay to reduce sig by as much as this factor
      ! as needed to prevent causing negative abundances
    Tcenter_min_for_sig_min_factor_full_on = 3.2d9
      ! if Tcenter >= this, factor = sig_min_factor_for_neg_abundances
      ! this should be > Tcenter_max_for_sig_min_factor_full_off.
    Tcenter_max_for_sig_min_factor_full_off = 2.8d9
      ! if Tcenter <= this, factor = 1, so has no effect
      ! this should be < Tcenter_min_for_sig_min_factor_full_on.
    ! for T > full_off and < full_on, factor changes linearly with Tcenter

    velocity_logT_lower_bound = 8 
    max_dt_yrs_for_velocity_logT_lower_bound = 0.1

    mesh_delta_coeff = 1.5
    mesh_delta_coeff_for_highT = 2.5
    logT_max_for_standard_mesh_delta_coeff = 9.0 
    logT_min_for_highT_mesh_delta_coeff = 9.5 

    varcontrol_target = 1d-3
    
    dX_nuc_drop_limit = 5d-2
    dX_nuc_drop_limit_at_high_T = 5d-3 ! for center logT > 9.45

    delta_lgL_He_limit = 0.1 ! limit for magnitude of change in lgL_He

    dX_nuc_drop_max_A_limit = 52
    dX_nuc_drop_min_X_limit = 1d-4
    dX_nuc_drop_hard_limit = 1d99

    delta_lgTeff_limit = 0.5  
    delta_lgL_limit = 0.5
    delta_lgRho_cntr_limit = 0.02  

    T_mix_limit = 0

    delta_Ye_highT_limit = 1d-3

    okay_to_reduce_gradT_excess = .true. 
      gradT_excess_f1 = 1d-4
      gradT_excess_f2 = 1d-2
      gradT_excess_age_fraction = 0.9d0

      gradT_excess_lambda1 = 1.0
      gradT_excess_beta1 = 0.35
      
      gradT_excess_lambda2 = 0.5
      gradT_excess_beta2 = 0.25
      
      gradT_excess_dlambda = 0.1
      gradT_excess_dbeta = 0.1

    min_timestep_limit = 1d-12 ! (seconds)

  !   P H Y S I C A L   C O N T R O L S

  ! Use Ledoux or Schwarzschild criterion (i.e., activate semiconvection) 
    use_Ledoux_criterion = .true.
    alpha_semiconvection = 0.01
    thermohaline_coeff = 2
    thermohaline_option = 'Kippenhahn'

  ! Convective overshooting
    min_overshoot_q = 0d0

    screening_mode = 'extended'

  ! Mixing length theory
    mixing_length_alpha = 1.5
    MLT_option = 'Henyey'

  ! Wind mass loss
    hot_wind_scheme = '' ! 'Dutch'
    hot_wind_full_on_T = 1d0
    cool_wind_full_on_T = 0d0
    Dutch_scaling_factor = 0.8

    include_composition_in_eps_grav = .true.

    xa_scale = 1d-5
    newton_itermin = 2


  !   O U T P U T  C O N T R O L
      write_profiles_flag = .true.
      profile_interval = 150 ! less often than default 50 to save space

      photo_interval = -1

/ ! end of controls namelist
